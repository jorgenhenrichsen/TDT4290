
{% extends 'base.html' %}

{% block head %}
        <link rel="stylesheet" type="text/css" href="/static/css/search.css">
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.8.18/themes/base/jquery-ui.css" type="text/css" media="all" />
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript">
        </script> <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" type="text/javascript"></script>


        <script type="text/javascript">

        var selectedLifter;

        $(function() {
          $("#query-text").autocomplete({
              source: "/search/lifter/",
              minLength: 2,
              select: function (event, ui) {
                  var id = ui.item.id
                  console.log("Selected " + ui.item.label, "ID: " + id);
                  selectedLifter = id;
              }
          });
        });

        function submitForm() {
            var form = document.getElementById("search-form");
            var lifterId = document.getElementById("lifter-id");
            lifterId.value = selectedLifter;
            form.submit();
        }

        </script>
{%  endblock %}


{% block content %}

    <div class="search-container centered-horizontal">

        <h1>Søk etter resultater</h1>

        <form class="query-form" id="search-form" role="search" action="/search/">
            <div class="ui-widget">
                <input type="text" id="query-text" class="query-text-input" placeholder="Navn..." name="query_text">

                <select class="search-selector" name="club_id">
                    <option disabled selected value="">Velg klubb</option>
                    {% for club in clubs %}
                        <option value={{ club.pk }}>{{ club.clubName }}</option>
                    {% endfor %}
                </select>

                <select class="search-selector">
                    <option disabled selected value="">Velg vektklasse</option>
                </select>

                <select class="search-selector">
                    <option disabled selected>Velg kategori</option>
                </select>

                <input type="hidden" value="" id="lifter-id" name="lifter_id">
                <input class="search-button" type="submit" value="Søk">


            </div>
         </form>

        <button onclick="submitForm()">Sub</button>


        <div class="search-results-container">

            {% for result in results %}

                <label>{{ result.lifter.first_name }} {{ result.lifter.last_name }}</label><br>

            {% endfor %}

        </div>

    </div>

{% endblock %}